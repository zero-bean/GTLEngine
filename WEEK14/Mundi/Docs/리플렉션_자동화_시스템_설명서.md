# Mundi Engine - ë¦¬í”Œë ‰ì…˜ ë° Lua ë°”ì¸ë”© ìë™í™” ì‹œìŠ¤í…œ

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#ê°œìš”)
2. [ì‹œìŠ¤í…œ êµ¬ì„±](#ì‹œìŠ¤í…œ-êµ¬ì„±)
3. [ë™ì‘ ì›ë¦¬](#ë™ì‘-ì›ë¦¬)
4. [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)
5. [ì½”ë“œ ìƒì„± ì˜ˆì‹œ](#ì½”ë“œ-ìƒì„±-ì˜ˆì‹œ)
6. [ë§¤í¬ë¡œ ìƒì„¸ ì„¤ëª…](#ë§¤í¬ë¡œ-ìƒì„¸-ì„¤ëª…)

---

## ê°œìš”

ì´ ìë™í™” ì‹œìŠ¤í…œì€ ì–¸ë¦¬ì–¼ ì—”ì§„(Unreal Engine)ì˜ ë¦¬í”Œë ‰ì…˜ ì‹œìŠ¤í…œì—ì„œ ì˜ê°ì„ ë°›ì•„ ì œì‘ëœ **C++ ì½”ë“œ ìë™ ìƒì„± ë„êµ¬**ì…ë‹ˆë‹¤.

### ì£¼ìš” ëª©ì 
- C++ í´ë˜ìŠ¤ì˜ **í”„ë¡œí¼í‹°(Property)** ì™€ **í•¨ìˆ˜(Function)** ë¥¼ ëŸ°íƒ€ì„ì— ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ë¦¬í”Œë ‰ì…˜ ì½”ë“œ ìë™ ìƒì„±
- Lua ìŠ¤í¬ë¦½íŠ¸ì—ì„œ C++ ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ **Lua ë°”ì¸ë”© ì½”ë“œ** ìë™ ìƒì„±
- ë°˜ë³µì ì´ê³  ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ì‰¬ìš´ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ ì‘ì„±ì„ ìë™í™”

### í•´ê²°í•˜ëŠ” ë¬¸ì œ
ê¸°ì¡´ì—ëŠ” ìƒˆë¡œìš´ Actorë‚˜ Componentë¥¼ ì¶”ê°€í•  ë•Œë§ˆë‹¤ ë‹¤ìŒ ì‘ì—…ì„ **ìˆ˜ë™**ìœ¼ë¡œ í•´ì•¼ í–ˆìŠµë‹ˆë‹¤:
- í”„ë¡œí¼í‹°ë¥¼ ì—ë””í„°ì—ì„œ í¸ì§‘ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” ì½”ë“œ ì‘ì„±
- Lua ìŠ¤í¬ë¦½íŠ¸ì—ì„œ C++ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë°”ì¸ë”© ì½”ë“œ ì‘ì„±
- í´ë˜ìŠ¤ íŒ©í† ë¦¬ ë“±ë¡ ì½”ë“œ ì‘ì„±

ì´ ì‹œìŠ¤í…œì€ **ë§¤í¬ë¡œ ì£¼ì„**ë§Œ ì¶”ê°€í•˜ë©´ ìœ„ ëª¨ë“  ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

---

## ì‹œìŠ¤í…œ êµ¬ì„±

### 1. Python ë„êµ¬ (`Tools/CodeGenerator/`)

| íŒŒì¼ | ì—­í•  |
|------|------|
| `generate.py` | ë©”ì¸ ì‹¤í–‰ íŒŒì¼. ì „ì²´ ìƒì„± í”„ë¡œì„¸ìŠ¤ ì¡°ìœ¨ |
| `parser.py` | C++ í—¤ë” íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ í´ë˜ìŠ¤/í”„ë¡œí¼í‹°/í•¨ìˆ˜ ì •ë³´ ì¶”ì¶œ |
| `property_generator.py` | í”„ë¡œí¼í‹° ë¦¬í”Œë ‰ì…˜ ì½”ë“œ ìƒì„± |
| `lua_generator.py` | Lua ë°”ì¸ë”© ì½”ë“œ ìƒì„± |
| `add_uclass.py` | ëª¨ë“  í´ë˜ìŠ¤ì— UCLASS ë§¤í¬ë¡œ ìë™ ì¶”ê°€ (ë³´ì¡° ë„êµ¬) |

### 2. C++ ë§¤í¬ë¡œ

í—¤ë” íŒŒì¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë§¤í¬ë¡œ:

```cpp
UCLASS(DisplayName="...", Description="...")      // í´ë˜ìŠ¤ ë©”íƒ€ë°ì´í„°
GENERATED_REFLECTION_BODY()                        // ë¦¬í”Œë ‰ì…˜ ì½”ë“œ ì‚½ì… ì§€ì 
UPROPERTY(Category="...", EditAnywhere, ...)       // í”„ë¡œí¼í‹° ë§ˆí‚¹
UFUNCTION(DisplayName="...", LuaBind)              // Lua ë°”ì¸ë”© í•¨ìˆ˜ ë§ˆí‚¹
```

### 3. ìƒì„±ëœ íŒŒì¼ (`Generated/`)

ê° í´ë˜ìŠ¤ë‹¹ 2ê°œì˜ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤:
- `ClassName.generated.h` - í´ë˜ìŠ¤ ë‚´ë¶€ì— ì‚½ì…ë  ë©”ì„œë“œ ì •ì˜
- `ClassName.generated.cpp` - ì‹¤ì œ êµ¬í˜„ ì½”ë“œ

---

## ë™ì‘ ì›ë¦¬

### ì „ì²´ ì›Œí¬í”Œë¡œìš°

```
C++ í—¤ë” íŒŒì¼ (*.h)
    â”‚
    â”‚ [1] parser.pyê°€ ìŠ¤ìº”
    â”œâ”€â†’ UCLASS ë°œê²¬
    â”œâ”€â†’ UPROPERTY ë°œê²¬
    â””â”€â†’ UFUNCTION ë°œê²¬
    â”‚
    â”‚ [2] ClassInfo ê°ì²´ ìƒì„±
    â”‚
    â”œâ”€â†’ property_generator.py
    â”‚       â””â”€â†’ BEGIN_PROPERTIES / END_PROPERTIES ì½”ë“œ ìƒì„±
    â”‚
    â”œâ”€â†’ lua_generator.py
    â”‚       â””â”€â†’ LUA_BIND_BEGIN / LUA_BIND_END ì½”ë“œ ìƒì„±
    â”‚
    â””â”€â†’ generate.py
            â””â”€â†’ .generated.h / .generated.cpp íŒŒì¼ ì‘ì„±
```

### ìƒì„¸ ë™ì‘ ê³¼ì •

#### 1ë‹¨ê³„: í—¤ë” íŒŒì¼ ìŠ¤ìº” (`parser.py`)

`HeaderParser` í´ë˜ìŠ¤ê°€ ë‹¤ìŒì„ ìˆ˜í–‰:

```python
# GENERATED_REFLECTION_BODY()ê°€ ìˆëŠ” í´ë˜ìŠ¤ë§Œ ì²˜ë¦¬
if 'GENERATED_REFLECTION_BODY()' in content:
    # í´ë˜ìŠ¤ ì´ë¦„ê³¼ ë¶€ëª¨ í´ë˜ìŠ¤ ì¶”ì¶œ
    class AActor : public UObject  â†’ name="AActor", parent="UObject"

    # UPROPERTY íŒŒì‹±
    UPROPERTY(Category="[ì•¡í„°]", EditAnywhere)
    FString Tag;  â†’ Property(name="Tag", type="FString", category="[ì•¡í„°]")

    # UFUNCTION íŒŒì‹±
    UFUNCTION(DisplayName="ì„¤ì •", LuaBind)
    void SetTag(const FString& NewTag);
```

ì£¼ìš” íŒŒì‹± ê¸°ëŠ¥:
- **ê´„í˜¸ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜**: ì¤‘ì²©ëœ ê´„í˜¸ë¥¼ ì •í™•í•˜ê²Œ íŒŒì‹± (`_extract_balanced_parens`)
- **ì£¼ì„ í•„í„°ë§**: ì£¼ì„ ì²˜ë¦¬ëœ ë§¤í¬ë¡œëŠ” ë¬´ì‹œ
- **ë©”íƒ€ë°ì´í„° ì¶”ì¶œ**: `Key="Value"` í˜•ì‹ì˜ ë©”íƒ€ë°ì´í„° íŒŒì‹±

#### 2ë‹¨ê³„: í”„ë¡œí¼í‹° ì½”ë“œ ìƒì„± (`property_generator.py`)

`Property` ê°ì²´ë¥¼ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ ë§¤í¬ë¡œë¥¼ ì„ íƒ:

```cpp
// ê¸°ë³¸ í”„ë¡œí¼í‹°
ADD_PROPERTY(FString, Tag, "[ì•¡í„°]", true, "íƒœê·¸")

// ë²”ìœ„ê°€ ìˆëŠ” í”„ë¡œí¼í‹°
ADD_PROPERTY_RANGE(float, Intensity, "[ë¼ì´íŠ¸]", 0.0f, 10.0f, true)

// ë°°ì—´ í”„ë¡œí¼í‹°
ADD_PROPERTY_ARRAY(EPropertyType::Material, Materials, "[ë Œë”ë§]", true)

// íŠ¹ìˆ˜ íƒ€ì… (í…ìŠ¤ì²˜, ë©”ì‹œ ë“±)
ADD_PROPERTY_TEXTURE(UTexture2D*, AlbedoMap, "[ë¨¸í‹°ë¦¬ì–¼]", true)
```

íƒ€ì… ê°ì§€ ë¡œì§:
```python
def get_property_type_macro(self) -> str:
    if 'tarray' in type_lower:
        return 'ADD_PROPERTY_ARRAY'
    elif '*' in self.type and 'utexture' in type_lower:
        return 'ADD_PROPERTY_TEXTURE'
    elif self.has_range:
        return 'ADD_PROPERTY_RANGE'
    else:
        return 'ADD_PROPERTY'
```

#### 3ë‹¨ê³„: Lua ë°”ì¸ë”© ì½”ë“œ ìƒì„± (`lua_generator.py`)

`UFUNCTION`ì— `LuaBind` ë©”íƒ€ë°ì´í„°ê°€ ìˆëŠ” í•¨ìˆ˜ë§Œ ë°”ì¸ë”©:

```cpp
LUA_BIND_BEGIN(AActor)
{
    // void ë°˜í™˜ í•¨ìˆ˜
    AddAlias<AActor, const FString&>(
        T, "íƒœê·¸ì„¤ì •", &AActor::SetTag);

    // ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
    AddMethodR<FString, AActor>(
        T, "íƒœê·¸ê°€ì ¸ì˜¤ê¸°", &AActor::GetTag);
}
LUA_BIND_END()
```

í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ìë™ ì¶”ë¡ :
- íŒŒë¼ë¯¸í„° íƒ€ì… ì¶”ì¶œ: `const FString& NewTag` â†’ `const FString&`
- ë°˜í™˜ íƒ€ì… ì²´í¬: `void` vs ì¼ë°˜ íƒ€ì…
- `const` ë©¤ë²„ í•¨ìˆ˜ ì²˜ë¦¬

#### 4ë‹¨ê³„: ìµœì¢… íŒŒì¼ ìƒì„± (`generate.py`)

ë‘ ê°œì˜ íŒŒì¼ì„ ìƒì„±:

**ClassName.generated.h**:
```cpp
#define CURRENT_CLASS_GENERATED_BODY \
public: \
    using Super = ParentClass; \
    using ThisClass_t = ClassName; \
    static UClass* StaticClass() { ... } \
    virtual UClass* GetClass() const override { ... }
```

**ClassName.generated.cpp**:
```cpp
// 1. í´ë˜ìŠ¤ íŒ©í† ë¦¬ ë“±ë¡
namespace {
    struct ClassNameFactoryRegister { ... };
}

// 2. í”„ë¡œí¼í‹° ë¦¬í”Œë ‰ì…˜
BEGIN_PROPERTIES(ClassName)
    ADD_PROPERTY(...)
END_PROPERTIES()

// 3. Lua ë°”ì¸ë”©
LUA_BIND_BEGIN(ClassName)
    AddAlias<...>()
LUA_BIND_END()
```

---

## ì‚¬ìš© ë°©ë²•

### 1. C++ í—¤ë” íŒŒì¼ ì‘ì„±

```cpp
// ADirectionalLightActor.h
#pragma once
#include "Actor.h"
#include "ADirectionalLightActor.generated.h"  // â† ìƒì„±ë  íŒŒì¼ include

// UCLASSë¡œ í´ë˜ìŠ¤ ë©”íƒ€ë°ì´í„° ì •ì˜
UCLASS(DisplayName="ë°©í–¥ì„± ë¼ì´íŠ¸", Description="íƒœì–‘ê´‘ê³¼ ê°™ì€ í‰í–‰ê´‘ì„ ìƒì„±í•˜ëŠ” ì•¡í„°ì…ë‹ˆë‹¤")
class ADirectionalLightActor : public AActor
{
public:
    GENERATED_REFLECTION_BODY()  // â† ì—¬ê¸°ì— ì½”ë“œê°€ ì‚½ì…ë¨

    // í”„ë¡œí¼í‹° ì •ì˜
    UPROPERTY(Category="[ë¼ì´íŠ¸]", EditAnywhere, Tooltip="ì¡°ëª…ì˜ ë°ê¸°")
    float Intensity = 1.0f;

    UPROPERTY(Category="[ë¼ì´íŠ¸]", EditAnywhere, Range="0.0, 360.0")
    float Angle = 45.0f;

    // Luaì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•œ í•¨ìˆ˜
    UFUNCTION(DisplayName="ë°ê¸° ì„¤ì •", LuaBind)
    void SetIntensity(float NewIntensity);

    UFUNCTION(DisplayName="ë°ê¸° ê°€ì ¸ì˜¤ê¸°", LuaBind)
    float GetIntensity() const;
};
```

### 2. ì½”ë“œ ìƒì„± ì‹¤í–‰

```bash
python Tools/CodeGenerator/generate.py \
    --source-dir Source/Runtime \
    --output-dir Generated
```

ì¶œë ¥:
```
ğŸ”¨ Mundi Engine - Code Generator
ğŸ“ Source: Source/Runtime
ğŸ“ Output: Generated

ğŸ” Scanning for reflection classes...
âœ“ Found reflection class: ADirectionalLightActor in ADirectionalLightActor.h
âœ“ Found reflection class: AActor in Actor.h

âœ… Found 2 reflection class(es)

âœ“ Updated: ADirectionalLightActor
  â”œâ”€ ADirectionalLightActor.generated.h (modified)
  â”œâ”€ ADirectionalLightActor.generated.cpp (modified)
  â”œâ”€ Properties: 2
  â””â”€ Functions:  2

âœ… Code generation complete!
```

### 3. ìƒì„±ëœ íŒŒì¼ í™•ì¸

**ADirectionalLightActor.generated.h**:
```cpp
#pragma once

#define CURRENT_CLASS_GENERATED_BODY \
public: \
    using Super = AActor; \
    using ThisClass_t = ADirectionalLightActor; \
    static UClass* StaticClass() \
    { \
        static UClass Cls{ "ADirectionalLightActor", AActor::StaticClass(), sizeof(ADirectionalLightActor) }; \
        static bool bRegistered = (UClass::SignUpClass(&Cls), true); \
        return &Cls; \
    } \
    virtual UClass* GetClass() const override { return ADirectionalLightActor::StaticClass(); } \
    // ... ì¶”ê°€ ë©”ì„œë“œë“¤
```

**ADirectionalLightActor.generated.cpp**:
```cpp
// ===== Class Factory Registration =====
namespace {
    struct ADirectionalLightActorFactoryRegister
    {
        ADirectionalLightActorFactoryRegister()
        {
            ObjectFactory::RegisterClassType(
                ADirectionalLightActor::StaticClass(),
                []() -> UObject* { return new ADirectionalLightActor(); }
            );
        }
    };
    static ADirectionalLightActorFactoryRegister GRegister_ADirectionalLightActor;
}

// ===== Property Reflection =====
BEGIN_PROPERTIES(ADirectionalLightActor)
    MARK_AS_SPAWNABLE("ë°©í–¥ì„± ë¼ì´íŠ¸", "íƒœì–‘ê´‘ê³¼ ê°™ì€ í‰í–‰ê´‘ì„ ìƒì„±í•˜ëŠ” ì•¡í„°ì…ë‹ˆë‹¤")
    ADD_PROPERTY(float, Intensity, "[ë¼ì´íŠ¸]", true, "ì¡°ëª…ì˜ ë°ê¸°")
    ADD_PROPERTY_RANGE(float, Angle, "[ë¼ì´íŠ¸]", 0.0f, 360.0f, true)
END_PROPERTIES()

// ===== Lua Binding =====
LUA_BIND_BEGIN(ADirectionalLightActor)
{
    AddAlias<ADirectionalLightActor, float>(
        T, "ë°ê¸° ì„¤ì •", &ADirectionalLightActor::SetIntensity);
    AddMethodR<float, ADirectionalLightActor>(
        T, "ë°ê¸° ê°€ì ¸ì˜¤ê¸°", &ADirectionalLightActor::GetIntensity);
}
LUA_BIND_END()
```

### 4. Luaì—ì„œ ì‚¬ìš©

```lua
-- ì•¡í„° ìƒì„±
local light = World:SpawnActor("ADirectionalLightActor")

-- ìƒì„±ëœ ë°”ì¸ë”© í•¨ìˆ˜ í˜¸ì¶œ
light:ë°ê¸°ì„¤ì •(2.5)
local brightness = light:ë°ê¸°ê°€ì ¸ì˜¤ê¸°()

print("í˜„ì¬ ë°ê¸°: " .. brightness)  -- ì¶œë ¥: í˜„ì¬ ë°ê¸°: 2.5
```

---

## ì½”ë“œ ìƒì„± ì˜ˆì‹œ

### ì˜ˆì‹œ 1: ê¸°ë³¸ Component

**ì…ë ¥ (C++ í—¤ë”)**:
```cpp
UCLASS(DisplayName="ì¹´ë©”ë¼ ì»´í¬ë„ŒíŠ¸", Description="ì¹´ë©”ë¼ ë·°í¬íŠ¸ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤")
class UCameraComponent : public USceneComponent
{
public:
    GENERATED_REFLECTION_BODY()

    UPROPERTY(Category="[ì¹´ë©”ë¼]", EditAnywhere, Range="1.0, 179.0")
    float FOV = 90.0f;

    UPROPERTY(Category="[ì¹´ë©”ë¼]", EditAnywhere)
    float NearPlane = 0.1f;

    UFUNCTION(DisplayName="FOV ì„¤ì •", LuaBind)
    void SetFOV(float NewFOV);
};
```

**ì¶œë ¥ (ìƒì„±ëœ .generated.cpp)**:
```cpp
BEGIN_PROPERTIES(UCameraComponent)
    MARK_AS_COMPONENT("ì¹´ë©”ë¼ ì»´í¬ë„ŒíŠ¸", "ì¹´ë©”ë¼ ë·°í¬íŠ¸ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤")
    ADD_PROPERTY_RANGE(float, FOV, "[ì¹´ë©”ë¼]", 1.0f, 179.0f, true)
    ADD_PROPERTY(float, NearPlane, "[ì¹´ë©”ë¼]", true)
END_PROPERTIES()

LUA_BIND_BEGIN(UCameraComponent)
{
    AddAlias<UCameraComponent, float>(T, "FOV ì„¤ì •", &UCameraComponent::SetFOV);
}
LUA_BIND_END()
```

### ì˜ˆì‹œ 2: ë°°ì—´ ë° íŠ¹ìˆ˜ íƒ€ì…

**ì…ë ¥**:
```cpp
UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
TArray<UMaterialInterface*> Materials;

UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
UTexture2D* AlbedoTexture;

UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
UStaticMesh* Mesh;
```

**ì¶œë ¥**:
```cpp
ADD_PROPERTY_ARRAY(EPropertyType::Material, Materials, "[ë Œë”ë§]", true)
ADD_PROPERTY_TEXTURE(UTexture2D*, AlbedoTexture, "[ë Œë”ë§]", true)
ADD_PROPERTY_STATICMESH(UStaticMesh*, Mesh, "[ë Œë”ë§]", true)
```

---

## ë§¤í¬ë¡œ ìƒì„¸ ì„¤ëª…

### UCLASS

í´ë˜ìŠ¤ ë ˆë²¨ ë©”íƒ€ë°ì´í„°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

```cpp
UCLASS(DisplayName="í‘œì‹œ ì´ë¦„", Description="ì„¤ëª…")
```

**íŒŒë¼ë¯¸í„°**:
- `DisplayName`: ì—ë””í„°ì—ì„œ í‘œì‹œë  ì´ë¦„ (í•œê¸€ ê°€ëŠ¥)
- `Description`: í´ë˜ìŠ¤ì— ëŒ€í•œ ì„¤ëª…

**ì‚¬ìš© ìœ„ì¹˜**: í´ë˜ìŠ¤ ì„ ì–¸ ë°”ë¡œ ìœ„

---

### GENERATED_REFLECTION_BODY()

ìë™ ìƒì„±ëœ ì½”ë“œê°€ ì‚½ì…ë  ìœ„ì¹˜ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

```cpp
class MyClass {
public:
    GENERATED_REFLECTION_BODY()  // â† ì—¬ê¸°ì— ì½”ë“œ ì‚½ì…ë¨

    // ë‚˜ë¨¸ì§€ í´ë˜ìŠ¤ ë©¤ë²„ë“¤...
};
```

**ìƒì„±ë˜ëŠ” ë‚´ìš©**:
- `StaticClass()` - í´ë˜ìŠ¤ íƒ€ì… ì •ë³´ ë°˜í™˜
- `GetClass()` - ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì… ì •ë³´ ë°˜í™˜
- `Super`, `ThisClass_t` - íƒ€ì… ë³„ì¹­
- `Duplicate()` - ê°ì²´ ë³µì œ í•¨ìˆ˜

---

### UPROPERTY

í”„ë¡œí¼í‹°ë¥¼ ë¦¬í”Œë ‰ì…˜ ì‹œìŠ¤í…œì— ë“±ë¡í•©ë‹ˆë‹¤. ì´ ë§¤í¬ë¡œë¥¼ ì‚¬ìš©í•˜ë©´ C++ ë©¤ë²„ ë³€ìˆ˜ê°€ ì—ë””í„°ì—ì„œ í¸ì§‘ ê°€ëŠ¥í•´ì§€ê³ , ëŸ°íƒ€ì„ì— ë¦¬í”Œë ‰ì…˜ìœ¼ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```cpp
UPROPERTY(Category="ì¹´í…Œê³ ë¦¬", EditAnywhere, Range="min, max", Tooltip="ì„¤ëª…")
Type PropertyName;
```

#### ì£¼ìš” íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„° | ì„¤ëª… | ì˜ˆì‹œ | í•„ìˆ˜ ì—¬ë¶€ |
|---------|------|------|----------|
| `Category` | í”„ë¡œí¼í‹° ê·¸ë£¹ (ì—ë””í„°ì—ì„œ ë¶„ë¥˜ í‘œì‹œ) | `Category="[ë¼ì´íŠ¸]"` | ê¶Œì¥ |
| `EditAnywhere` | ì—ë””í„°ì—ì„œ í¸ì§‘ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì • | `EditAnywhere` | ì„ íƒ |
| `Range` | ê°’ ë²”ìœ„ ì œí•œ (ìˆ«ì íƒ€ì…ë§Œ í•´ë‹¹) | `Range="0.0, 100.0"` | ì„ íƒ |
| `Tooltip` | ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ í‘œì‹œí•  ì„¤ëª… | `Tooltip="ë°ê¸°ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤"` | ì„ íƒ |

#### ì§€ì›í•˜ëŠ” íƒ€ì…

**1. ê¸°ë³¸ íƒ€ì…**
```cpp
UPROPERTY(Category="[ê¸°ë³¸]", EditAnywhere)
int Count = 0;

UPROPERTY(Category="[ê¸°ë³¸]", EditAnywhere)
float Intensity = 1.0f;

UPROPERTY(Category="[ê¸°ë³¸]", EditAnywhere)
bool bIsEnabled = true;

UPROPERTY(Category="[ê¸°ë³¸]", EditAnywhere)
FString Name = "Default";

UPROPERTY(Category="[ê¸°ë³¸]", EditAnywhere)
FName Tag = "None";

UPROPERTY(Category="[ê¸°ë³¸]", EditAnywhere)
FVector Position = FVector::ZeroVector;
```

**2. í¬ì¸í„° íƒ€ì… (ì—ì…‹ ì°¸ì¡°)**
```cpp
UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
UTexture2D* AlbedoTexture = nullptr;

UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
UStaticMesh* Mesh = nullptr;

UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
UMaterialInterface* Material = nullptr;

UPROPERTY(Category="[ì˜¤ë””ì˜¤]", EditAnywhere)
USoundBase* Sound = nullptr;
```

**3. ë°°ì—´ íƒ€ì…**
```cpp
UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
TArray<UMaterialInterface*> Materials;

UPROPERTY(Category="[ë°ì´í„°]", EditAnywhere)
TArray<int> Numbers;

UPROPERTY(Category="[ë°ì´í„°]", EditAnywhere)
TArray<FString> Names;
```

**4. ë²”ìœ„ ì œí•œ íƒ€ì…**
```cpp
UPROPERTY(Category="[ë¼ì´íŠ¸]", EditAnywhere, Range="0.0, 10.0")
float Brightness = 1.0f;

UPROPERTY(Category="[ì¹´ë©”ë¼]", EditAnywhere, Range="1.0, 179.0")
float FOV = 90.0f;

UPROPERTY(Category="[íš¨ê³¼]", EditAnywhere, Range="0, 255")
int Opacity = 255;
```

#### ì‚¬ìš© ì˜ˆì‹œ

**ì˜ˆì‹œ 1: ê¸°ë³¸ í”„ë¡œí¼í‹°**
```cpp
// C++ í—¤ë” íŒŒì¼
class AMyActor : public AActor
{
public:
    GENERATED_REFLECTION_BODY()

    UPROPERTY(Category="[ê¸°ë³¸ ì„¤ì •]", EditAnywhere, Tooltip="ì•¡í„°ì˜ ì´ë¦„")
    FString ActorName = "MyActor";

    UPROPERTY(Category="[ê¸°ë³¸ ì„¤ì •]", EditAnywhere, Tooltip="í™œì„±í™” ì—¬ë¶€")
    bool bIsActive = true;
};
```

ìƒì„±ë˜ëŠ” ì½”ë“œ:
```cpp
// .generated.cpp
BEGIN_PROPERTIES(AMyActor)
    ADD_PROPERTY(FString, ActorName, "[ê¸°ë³¸ ì„¤ì •]", true, "ì•¡í„°ì˜ ì´ë¦„")
    ADD_PROPERTY(bool, bIsActive, "[ê¸°ë³¸ ì„¤ì •]", true, "í™œì„±í™” ì—¬ë¶€")
END_PROPERTIES()
```

**ì˜ˆì‹œ 2: ë²”ìœ„ ì œí•œ í”„ë¡œí¼í‹°**
```cpp
// C++ í—¤ë” íŒŒì¼
class ULightComponent : public UActorComponent
{
public:
    GENERATED_REFLECTION_BODY()

    UPROPERTY(Category="[ì¡°ëª…]", EditAnywhere, Range="0.0, 10.0", Tooltip="ì¡°ëª… ê°•ë„")
    float Intensity = 1.0f;

    UPROPERTY(Category="[ì¡°ëª…]", EditAnywhere, Range="0.0, 360.0", Tooltip="ì¡°ëª… ê°ë„")
    float LightAngle = 90.0f;
};
```

ìƒì„±ë˜ëŠ” ì½”ë“œ:
```cpp
// .generated.cpp
BEGIN_PROPERTIES(ULightComponent)
    ADD_PROPERTY_RANGE(float, Intensity, "[ì¡°ëª…]", 0.0f, 10.0f, true, "ì¡°ëª… ê°•ë„")
    ADD_PROPERTY_RANGE(float, LightAngle, "[ì¡°ëª…]", 0.0f, 360.0f, true, "ì¡°ëª… ê°ë„")
END_PROPERTIES()
```

**ì˜ˆì‹œ 3: ë°°ì—´ ë° ì—ì…‹ ì°¸ì¡°**
```cpp
// C++ í—¤ë” íŒŒì¼
class UStaticMeshComponent : public UPrimitiveComponent
{
public:
    GENERATED_REFLECTION_BODY()

    UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere, Tooltip="ë©”ì‹œ ì—ì…‹")
    UStaticMesh* StaticMesh = nullptr;

    UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere, Tooltip="ë¨¸í‹°ë¦¬ì–¼ ë°°ì—´")
    TArray<UMaterialInterface*> Materials;

    UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere, Tooltip="í…ìŠ¤ì²˜")
    UTexture2D* Texture = nullptr;
};
```

ìƒì„±ë˜ëŠ” ì½”ë“œ:
```cpp
// .generated.cpp
BEGIN_PROPERTIES(UStaticMeshComponent)
    ADD_PROPERTY_STATICMESH(UStaticMesh*, StaticMesh, "[ë Œë”ë§]", true, "ë©”ì‹œ ì—ì…‹")
    ADD_PROPERTY_ARRAY(EPropertyType::Material, Materials, "[ë Œë”ë§]", true, "ë¨¸í‹°ë¦¬ì–¼ ë°°ì—´")
    ADD_PROPERTY_TEXTURE(UTexture2D*, Texture, "[ë Œë”ë§]", true, "í…ìŠ¤ì²˜")
END_PROPERTIES()
```

#### ìë™ ìƒì„±ë˜ëŠ” ë§¤í¬ë¡œ ì¢…ë¥˜

í”„ë¡œí¼í‹° íƒ€ì…ì— ë”°ë¼ ìë™ìœ¼ë¡œ ì ì ˆí•œ ë§¤í¬ë¡œê°€ ì„ íƒë©ë‹ˆë‹¤:

| í”„ë¡œí¼í‹° íƒ€ì… | ìƒì„±ë˜ëŠ” ë§¤í¬ë¡œ | ì„¤ëª… |
|-------------|---------------|------|
| ê¸°ë³¸ íƒ€ì… (int, float, bool ë“±) | `ADD_PROPERTY` | ì¼ë°˜ í”„ë¡œí¼í‹° |
| Range ì†ì„±ì´ ìˆëŠ” ìˆ«ì | `ADD_PROPERTY_RANGE` | ë²”ìœ„ ì œí•œ í”„ë¡œí¼í‹° |
| `UTexture2D*` | `ADD_PROPERTY_TEXTURE` | í…ìŠ¤ì²˜ ì—ì…‹ |
| `UStaticMesh*` | `ADD_PROPERTY_STATICMESH` | ë©”ì‹œ ì—ì…‹ |
| `UMaterialInterface*` | `ADD_PROPERTY_MATERIAL` | ë¨¸í‹°ë¦¬ì–¼ ì—ì…‹ |
| `USoundBase*` | `ADD_PROPERTY_AUDIO` | ì˜¤ë””ì˜¤ ì—ì…‹ |
| `TArray<T>` | `ADD_PROPERTY_ARRAY` | ë°°ì—´ íƒ€ì… |
| Curve íƒ€ì… | `ADD_PROPERTY_CURVE` | ì»¤ë¸Œ ë°ì´í„° |
| SRV íƒ€ì… | `ADD_PROPERTY_SRV` | ì…°ì´ë” ë¦¬ì†ŒìŠ¤ ë·° |

#### EditAnywhere vs í¸ì§‘ ë¶ˆê°€

```cpp
// âœ… ì—ë””í„°ì—ì„œ í¸ì§‘ ê°€ëŠ¥
UPROPERTY(Category="[ì„¤ì •]", EditAnywhere)
float Speed = 10.0f;

// âœ… ì—ë””í„°ì—ì„œ ì½ê¸° ì „ìš© (EditAnywhere ì—†ìŒ)
UPROPERTY(Category="[ì •ë³´]")
int FrameCount = 0;
```

ìƒì„±ë˜ëŠ” ì½”ë“œ:
```cpp
ADD_PROPERTY(float, Speed, "[ì„¤ì •]", true)    // true = í¸ì§‘ ê°€ëŠ¥
ADD_PROPERTY(int, FrameCount, "[ì •ë³´]", false)  // false = ì½ê¸° ì „ìš©
```

#### ì£¼ì˜ì‚¬í•­

1. **íƒ€ì… ì¼ì¹˜**: í”„ë¡œí¼í‹° íƒ€ì…ê³¼ ì‹¤ì œ ë³€ìˆ˜ íƒ€ì…ì´ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤
   ```cpp
   // âŒ ì˜ëª»ëœ ì˜ˆ
   UPROPERTY(Category="Test", EditAnywhere)
   int Value = 1.5f;  // intì¸ë° float ê°’ í• ë‹¹

   // âœ… ì˜¬ë°”ë¥¸ ì˜ˆ
   UPROPERTY(Category="Test", EditAnywhere)
   float Value = 1.5f;
   ```

2. **í¬ì¸í„° ì´ˆê¸°í™”**: í¬ì¸í„° íƒ€ì…ì€ ë°˜ë“œì‹œ nullptrë¡œ ì´ˆê¸°í™”
   ```cpp
   // âŒ ì˜ëª»ëœ ì˜ˆ
   UPROPERTY(Category="Test", EditAnywhere)
   UTexture2D* Texture;  // ì´ˆê¸°í™” ì•ˆ í•¨

   // âœ… ì˜¬ë°”ë¥¸ ì˜ˆ
   UPROPERTY(Category="Test", EditAnywhere)
   UTexture2D* Texture = nullptr;
   ```

3. **Range í˜•ì‹**: ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ë‘ ìˆ«ì
   ```cpp
   // âŒ ì˜ëª»ëœ ì˜ˆ
   UPROPERTY(Category="Test", EditAnywhere, Range="0.0-100.0")

   // âœ… ì˜¬ë°”ë¥¸ ì˜ˆ
   UPROPERTY(Category="Test", EditAnywhere, Range="0.0, 100.0")
   ```

---

### UFUNCTION

í•¨ìˆ˜ë¥¼ Luaì— ë°”ì¸ë”©í•©ë‹ˆë‹¤.

```cpp
UFUNCTION(DisplayName="í‘œì‹œ ì´ë¦„", LuaBind)
ReturnType FunctionName(Parameters);
```

**ì£¼ìš” íŒŒë¼ë¯¸í„°**:

| íŒŒë¼ë¯¸í„° | ì„¤ëª… | í•„ìˆ˜ ì—¬ë¶€ |
|---------|------|----------|
| `DisplayName` | Luaì—ì„œ ì‚¬ìš©í•  í•¨ìˆ˜ ì´ë¦„ | ì„ íƒ (ê¸°ë³¸ê°’: ì›ë³¸ ì´ë¦„) |
| `LuaBind` | Lua ë°”ì¸ë”© í™œì„±í™” | **í•„ìˆ˜** |

**ì˜ˆì‹œ**:
```cpp
// void ë°˜í™˜ í•¨ìˆ˜
UFUNCTION(DisplayName="ì´ë¦„ë³€ê²½", LuaBind)
void SetName(const FString& NewName);

// ê°’ ë°˜í™˜ í•¨ìˆ˜
UFUNCTION(DisplayName="ì´ë¦„ê°€ì ¸ì˜¤ê¸°", LuaBind)
FString GetName() const;

// ì—¬ëŸ¬ íŒŒë¼ë¯¸í„°
UFUNCTION(DisplayName="ìœ„ì¹˜ì„¤ì •", LuaBind)
void SetLocation(float X, float Y, float Z);
```

---

## ì„±ëŠ¥ ìµœì í™”

### 1. ë³€ê²½ ê°ì§€ ì‹œìŠ¤í…œ

`write_file_if_different()` í•¨ìˆ˜ë¡œ ë¶ˆí•„ìš”í•œ ì¬ì»´íŒŒì¼ ë°©ì§€:

```python
def write_file_if_different(file_path: Path, new_content: str) -> bool:
    if file_path.exists():
        existing_content = file_path.read_text(encoding='utf-8')
        if existing_content == new_content:
            return False  # ë‚´ìš©ì´ ê°™ìœ¼ë©´ ì“°ì§€ ì•ŠìŒ

    file_path.write_text(new_content, encoding='utf-8')
    return True
```

**íš¨ê³¼**: ë‚´ìš©ì´ ë³€ê²½ë˜ì§€ ì•Šì€ íŒŒì¼ì˜ íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ìœ ì§€í•˜ì—¬ ë¹Œë“œ ì‹œìŠ¤í…œì´ ë¶ˆí•„ìš”í•œ ì¬ì»´íŒŒì¼ì„ í•˜ì§€ ì•Šë„ë¡ í•¨

### 2. ì •ê·œì‹ ìµœì í™”

ë³µì¡í•œ íŒŒì‹±ì—ëŠ” **ê´„í˜¸ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜** ì‚¬ìš©:

```python
# âŒ ì •ê·œì‹ë§Œ ì‚¬ìš© (ì¤‘ì²© ê´„í˜¸ ì²˜ë¦¬ ë¶ˆê°€)
re.compile(r'UPROPERTY\s*\((.*?)\)')  # ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ

# âœ… ê´„í˜¸ ê¹Šì´ ì¶”ì 
def _extract_balanced_parens(text: str, start_pos: int):
    depth = 1
    for i in range(start_pos, len(text)):
        if text[i] == '(': depth += 1
        elif text[i] == ')': depth -= 1
        if depth == 0: return text[start_pos:i]
```

---

## ì£¼ì˜ì‚¬í•­ ë° ì œì•½

### 1. í—¤ë” íŒŒì¼ ì‘ì„± ê·œì¹™

```cpp
// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
UCLASS(DisplayName="ì´ë¦„", Description="ì„¤ëª…")
class MyClass : public ParentClass
{
public:
    GENERATED_REFLECTION_BODY()

    UPROPERTY(Category="ê·¸ë£¹", EditAnywhere)
    float Value;
};

// âŒ ì˜ëª»ëœ ì˜ˆì‹œ
class MyClass : public ParentClass
{
    GENERATED_REFLECTION_BODY()  // public: ì„¹ì…˜ì— ìˆì–´ì•¼ í•¨

    float Value;  // UPROPERTY ì—†ìœ¼ë©´ ë¦¬í”Œë ‰ì…˜ ì•ˆ ë¨
};
```

### 2. include ìˆœì„œ

ìƒì„±ëœ í—¤ë”ë¥¼ **ë§ˆì§€ë§‰**ì— include:

```cpp
#pragma once
#include "Actor.h"
#include "Component.h"
#include "MyClass.generated.h"  // â† í•­ìƒ ë§ˆì§€ë§‰
```

### 3. ë¹Œë“œ ìˆœì„œ

1. Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ â†’ `.generated.cpp` ìƒì„±
2. C++ ì»´íŒŒì¼ëŸ¬ ì‹¤í–‰

Visual Studio í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ **Pre-Build Event**ë¡œ ìë™í™” ê°€ëŠ¥:

```xml
<PreBuildEvent>
  <Command>python $(ProjectDir)Tools\CodeGenerator\generate.py --source-dir $(ProjectDir)Source\Runtime --output-dir $(ProjectDir)Generated</Command>
</PreBuildEvent>
```

---

## ì¶”ê°€ ë„êµ¬

### add_uclass.py

ëª¨ë“  í´ë˜ìŠ¤ì— `UCLASS` ë§¤í¬ë¡œë¥¼ ì¼ê´„ ì¶”ê°€í•˜ëŠ” ë³´ì¡° ë„êµ¬:

```bash
python Tools/CodeGenerator/add_uclass.py Source/Runtime
```

**ê¸°ëŠ¥**:
- `GENERATED_REFLECTION_BODY()`ê°€ ìˆì§€ë§Œ `UCLASS`ê°€ ì—†ëŠ” í´ë˜ìŠ¤ ì°¾ê¸°
- ì‚¬ì „ ì •ì˜ëœ `CLASS_DESCRIPTIONS` ë”•ì…”ë„ˆë¦¬ì—ì„œ DisplayName/Description ê°€ì ¸ì˜¤ê¸°
- ìë™ìœ¼ë¡œ `UCLASS(...)` ë§¤í¬ë¡œ ì¶”ê°€

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
CLASS_DESCRIPTIONS = {
    "ADirectionalLightActor": ("ë°©í–¥ì„± ë¼ì´íŠ¸", "íƒœì–‘ê´‘ê³¼ ê°™ì€ í‰í–‰ê´‘ì„ ìƒì„±í•˜ëŠ” ì•¡í„°ì…ë‹ˆë‹¤"),
    "UCameraComponent": ("ì¹´ë©”ë¼ ì»´í¬ë„ŒíŠ¸", "ì¹´ë©”ë¼ ë·°í¬íŠ¸ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤"),
}
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### Q1. "No classes with GENERATED_REFLECTION_BODY() found" ì˜¤ë¥˜

**ì›ì¸**: í—¤ë” íŒŒì¼ì— `GENERATED_REFLECTION_BODY()` ë§¤í¬ë¡œê°€ ì—†ìŒ

**í•´ê²°**:
```cpp
class MyClass {
public:
    GENERATED_REFLECTION_BODY()  // â† ì´ ì¤„ ì¶”ê°€
};
```

### Q2. í”„ë¡œí¼í‹°ê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: `UPROPERTY` ë§¤í¬ë¡œê°€ ì£¼ì„ ì²˜ë¦¬ë˜ì—ˆê±°ë‚˜ ë¬¸ë²• ì˜¤ë¥˜

**í™•ì¸ì‚¬í•­**:
```cpp
// âŒ ì£¼ì„ ì²˜ë¦¬ë¨
// UPROPERTY(Category="Test", EditAnywhere)
float Value;

// âœ… ì •ìƒ
UPROPERTY(Category="Test", EditAnywhere)
float Value;
```

### Q3. Lua ë°”ì¸ë”©ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: `UFUNCTION`ì— `LuaBind` ë©”íƒ€ë°ì´í„° ëˆ„ë½

**í•´ê²°**:
```cpp
// âŒ LuaBind ì—†ìŒ
UFUNCTION(DisplayName="ì„¤ì •")
void SetValue(float V);

// âœ… LuaBind ì¶”ê°€
UFUNCTION(DisplayName="ì„¤ì •", LuaBind)
void SetValue(float V);
```

---

## ì‹¤ì „ ì‚¬ìš© ê°€ì´ë“œ

### ì™„ì „í•œ ì›Œí¬í”Œë¡œìš°: ìƒˆ ì•¡í„° ì¶”ê°€í•˜ê¸°

ì²˜ìŒë¶€í„° ëê¹Œì§€ ìƒˆë¡œìš´ Actorë¥¼ ì¶”ê°€í•˜ëŠ” ì „ì²´ ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.

#### Step 1: í—¤ë” íŒŒì¼ ìƒì„±

`Source/Runtime/Engine/GameFramework/AMyCustomActor.h` íŒŒì¼ ìƒì„±:

```cpp
#pragma once
#include "Source/Runtime/Core/Object/Actor.h"
#include "AMyCustomActor.generated.h"  // â† ì•„ì§ ì—†ì§€ë§Œ ë¯¸ë¦¬ include

UCLASS(DisplayName="ë‚´ ì»¤ìŠ¤í…€ ì•¡í„°", Description="ì˜ˆì œìš© ì»¤ìŠ¤í…€ ì•¡í„°ì…ë‹ˆë‹¤")
class AMyCustomActor : public AActor
{
public:
    GENERATED_REFLECTION_BODY()

    AMyCustomActor();
    ~AMyCustomActor() override;

    // í”„ë¡œí¼í‹°ë“¤
    UPROPERTY(Category="[ê¸°ë³¸ ì„¤ì •]", EditAnywhere, Tooltip="ì•¡í„°ì˜ ì´ë¦„")
    FString ActorName = "CustomActor";

    UPROPERTY(Category="[ì´ë™]", EditAnywhere, Range="0.0, 1000.0", Tooltip="ì´ë™ ì†ë„")
    float MoveSpeed = 100.0f;

    UPROPERTY(Category="[ì´ë™]", EditAnywhere, Tooltip="ìë™ ì´ë™ í™œì„±í™”")
    bool bAutoMove = false;

    UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere, Tooltip="ë©”ì‹œ")
    UStaticMesh* Mesh = nullptr;

    // Luaì—ì„œ í˜¸ì¶œí•  í•¨ìˆ˜ë“¤
    UFUNCTION(DisplayName="ì†ë„ì„¤ì •", LuaBind)
    void SetSpeed(float NewSpeed);

    UFUNCTION(DisplayName="ì†ë„ê°€ì ¸ì˜¤ê¸°", LuaBind)
    float GetSpeed() const;

    UFUNCTION(DisplayName="ì´ë™ì‹œì‘", LuaBind)
    void StartMoving();

    // ìˆ˜ëª… ì£¼ê¸°
    void BeginPlay() override;
    void Tick(float DeltaSeconds) override;
};
```

#### Step 2: êµ¬í˜„ íŒŒì¼ ìƒì„±

`Source/Runtime/Engine/GameFramework/AMyCustomActor.cpp` íŒŒì¼ ìƒì„±:

```cpp
#include "pch.h"
#include "AMyCustomActor.h"

AMyCustomActor::AMyCustomActor()
{
    // ìƒì„±ì
}

AMyCustomActor::~AMyCustomActor()
{
    // ì†Œë©¸ì
}

void AMyCustomActor::SetSpeed(float NewSpeed)
{
    MoveSpeed = NewSpeed;
    UE_LOG(LogTemp, Log, "Speed set to: %f", MoveSpeed);
}

float AMyCustomActor::GetSpeed() const
{
    return MoveSpeed;
}

void AMyCustomActor::StartMoving()
{
    bAutoMove = true;
    UE_LOG(LogTemp, Log, "Auto move started");
}

void AMyCustomActor::BeginPlay()
{
    Super::BeginPlay();
    UE_LOG(LogTemp, Log, "AMyCustomActor BeginPlay: %s", *ActorName);
}

void AMyCustomActor::Tick(float DeltaSeconds)
{
    Super::Tick(DeltaSeconds);

    if (bAutoMove)
    {
        FVector CurrentLocation = GetActorLocation();
        CurrentLocation.X += MoveSpeed * DeltaSeconds;
        SetActorLocation(CurrentLocation);
    }
}
```

#### Step 3: ì½”ë“œ ìƒì„± ì‹¤í–‰

í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰:

```bash
cd C:\Users\Jungle\KraftonGTL_week10\Mundi
python Tools/CodeGenerator/generate.py --source-dir Source/Runtime --output-dir Generated
```

ì¶œë ¥ ê²°ê³¼:
```
ğŸ”¨ Mundi Engine - Code Generator
ğŸ“ Source: Source/Runtime
ğŸ“ Output: Generated

ğŸ” Scanning for reflection classes...
âœ“ Found reflection class: AMyCustomActor in AMyCustomActor.h

âœ… Found 1 reflection class(es)

âœ“ Updated: AMyCustomActor
  â”œâ”€ AMyCustomActor.generated.h (modified)
  â”œâ”€ AMyCustomActor.generated.cpp (modified)
  â”œâ”€ Properties: 4
  â””â”€ Functions:  3

âœ… Code generation complete!
```

#### Step 4: ìƒì„±ëœ íŒŒì¼ í™•ì¸

**Generated/AMyCustomActor.generated.h**:
```cpp
#pragma once

#define CURRENT_CLASS_GENERATED_BODY \
public: \
    using Super = AActor; \
    using ThisClass_t = AMyCustomActor; \
    static UClass* StaticClass() \
    { \
        static UClass Cls{ "AMyCustomActor", AActor::StaticClass(), sizeof(AMyCustomActor) }; \
        static bool bRegistered = (UClass::SignUpClass(&Cls), true); \
        return &Cls; \
    } \
    virtual UClass* GetClass() const override { return AMyCustomActor::StaticClass(); } \
    AMyCustomActor(const AMyCustomActor&) = default; \
    AMyCustomActor* Duplicate() const override \
    { \
        AMyCustomActor* NewObject = ObjectFactory::DuplicateObject<AMyCustomActor>(this); \
        NewObject->DuplicateSubObjects(); \
        NewObject->PostDuplicate(); \
        return NewObject; \
    } \
private: \
    static void StaticRegisterProperties(); \
    static const bool bPropertiesRegistered; \
public:
```

**Generated/AMyCustomActor.generated.cpp**:
```cpp
// Auto-generated file - DO NOT EDIT!
#include "pch.h"
#include "AMyCustomActor.h"
#include "Source/Runtime/Core/Object/ObjectMacros.h"
#include "Source/Runtime/Engine/Scripting/LuaBindHelpers.h"

// ===== Class Factory Registration =====
namespace {
    struct AMyCustomActorFactoryRegister
    {
        AMyCustomActorFactoryRegister()
        {
            ObjectFactory::RegisterClassType(
                AMyCustomActor::StaticClass(),
                []() -> UObject* { return new AMyCustomActor(); }
            );
        }
    };
    static AMyCustomActorFactoryRegister GRegister_AMyCustomActor;
    static bool bIsRegistered_AMyCustomActor = [](){ AMyCustomActor::StaticClass(); return true; }();
}

const bool AMyCustomActor::bPropertiesRegistered = []() {
    AMyCustomActor::StaticRegisterProperties();
    return true;
}();

// ===== Property Reflection =====
BEGIN_PROPERTIES(AMyCustomActor)
    MARK_AS_SPAWNABLE("ë‚´ ì»¤ìŠ¤í…€ ì•¡í„°", "ì˜ˆì œìš© ì»¤ìŠ¤í…€ ì•¡í„°ì…ë‹ˆë‹¤")
    ADD_PROPERTY(FString, ActorName, "[ê¸°ë³¸ ì„¤ì •]", true, "ì•¡í„°ì˜ ì´ë¦„")
    ADD_PROPERTY_RANGE(float, MoveSpeed, "[ì´ë™]", 0.0f, 1000.0f, true, "ì´ë™ ì†ë„")
    ADD_PROPERTY(bool, bAutoMove, "[ì´ë™]", true, "ìë™ ì´ë™ í™œì„±í™”")
    ADD_PROPERTY_STATICMESH(UStaticMesh*, Mesh, "[ë Œë”ë§]", true, "ë©”ì‹œ")
END_PROPERTIES()

// ===== Lua Binding =====
extern "C" void LuaBind_Anchor_AMyCustomActor() {}

LUA_BIND_BEGIN(AMyCustomActor)
{
    AddAlias<AMyCustomActor, float>(T, "ì†ë„ì„¤ì •", &AMyCustomActor::SetSpeed);
    AddMethodR<float, AMyCustomActor>(T, "ì†ë„ê°€ì ¸ì˜¤ê¸°", &AMyCustomActor::GetSpeed);
    AddAlias<AMyCustomActor>(T, "ì´ë™ì‹œì‘", &AMyCustomActor::StartMoving);
}
LUA_BIND_END()
```

#### Step 5: í”„ë¡œì íŠ¸ ë¹Œë“œ

Visual Studioì—ì„œ ë¹Œë“œí•˜ê±°ë‚˜:
```bash
msbuild Mundi.sln /p:Configuration=Debug
```

#### Step 6: Luaì—ì„œ ì‚¬ìš©

`Scripts/test_custom_actor.lua` íŒŒì¼ ìƒì„±:

```lua
-- ìƒˆë¡œìš´ ì•¡í„° ìƒì„±
local myActor = World:SpawnActor("AMyCustomActor")

-- í”„ë¡œí¼í‹° ì„¤ì • (ë¦¬í”Œë ‰ì…˜ì„ í†µí•´)
myActor:SetProperty("ActorName", "í…ŒìŠ¤íŠ¸ì•¡í„°")
myActor:SetProperty("MoveSpeed", 250.0)

-- Lua ë°”ì¸ë”© í•¨ìˆ˜ í˜¸ì¶œ
print("ì´ˆê¸° ì†ë„: " .. myActor:ì†ë„ê°€ì ¸ì˜¤ê¸°())

myActor:ì†ë„ì„¤ì •(500.0)
print("ë³€ê²½ëœ ì†ë„: " .. myActor:ì†ë„ê°€ì ¸ì˜¤ê¸°())

-- ìœ„ì¹˜ ì„¤ì •
myActor:SetActorLocation(Vector3.New(0, 0, 0))

-- ìë™ ì´ë™ ì‹œì‘
myActor:ì´ë™ì‹œì‘()

-- í”„ë¡œí¼í‹° ê°’ í™•ì¸
local speed = myActor:GetProperty("MoveSpeed")
local autoMove = myActor:GetProperty("bAutoMove")
print(string.format("ì†ë„: %f, ìë™ì´ë™: %s", speed, tostring(autoMove)))
```

ì‹¤í–‰ ê²°ê³¼:
```
ì´ˆê¸° ì†ë„: 100.0
ë³€ê²½ëœ ì†ë„: 500.0
ì†ë„: 500.000000, ìë™ì´ë™: true
```

#### Step 7: ì—ë””í„°ì—ì„œ ì‚¬ìš©

ì—”ì§„ ì—ë””í„°ë¥¼ ì‹¤í–‰í•˜ë©´:

1. **ì•¡í„° ìŠ¤í° ë©”ë‰´**ì— "ë‚´ ì»¤ìŠ¤í…€ ì•¡í„°" í‘œì‹œë¨
2. **í”„ë¡œí¼í‹° íŒ¨ë„**ì— ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œ:
   ```
   [ê¸°ë³¸ ì„¤ì •]
     ActorName: [        CustomActor        ]  â„¹ï¸ ì•¡í„°ì˜ ì´ë¦„

   [ì´ë™]
     MoveSpeed: [â”â”â”â”â”â”â—â”â”â”] 100.0              â„¹ï¸ ì´ë™ ì†ë„ (0.0 ~ 1000.0)
     bAutoMove: â˜ ìë™ ì´ë™ í™œì„±í™”

   [ë Œë”ë§]
     Mesh:      [ ì—†ìŒ â–¼ ]                     â„¹ï¸ ë©”ì‹œ
   ```

3. ìŠ¬ë¼ì´ë”ë¡œ `MoveSpeed` ì¡°ì ˆ ê°€ëŠ¥ (Range ë•ë¶„)
4. ì²´í¬ë°•ìŠ¤ë¡œ `bAutoMove` í† ê¸€ ê°€ëŠ¥
5. ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ `Mesh` ì—ì…‹ ì„ íƒ ê°€ëŠ¥

---

### ë¹ ë¥¸ ì°¸ì¡°: ì¼ë°˜ì ì¸ íŒ¨í„´

#### íŒ¨í„´ 1: ë¼ì´íŠ¸ ì»´í¬ë„ŒíŠ¸

```cpp
UCLASS(DisplayName="í¬ì¸íŠ¸ ë¼ì´íŠ¸", Description="ì ê´‘ì› ì¡°ëª… ì»´í¬ë„ŒíŠ¸")
class UPointLightComponent : public ULightComponent
{
public:
    GENERATED_REFLECTION_BODY()

    UPROPERTY(Category="[ì¡°ëª…]", EditAnywhere, Range="0.0, 10.0")
    float Intensity = 1.0f;

    UPROPERTY(Category="[ì¡°ëª…]", EditAnywhere, Range="0.0, 10000.0")
    float Radius = 500.0f;

    UPROPERTY(Category="[ì¡°ëª…]", EditAnywhere)
    FVector Color = FVector(1.0f, 1.0f, 1.0f);

    UFUNCTION(DisplayName="ë°ê¸°ì„¤ì •", LuaBind)
    void SetIntensity(float NewIntensity) { Intensity = NewIntensity; }
};
```

#### íŒ¨í„´ 2: ì¹´ë©”ë¼ ì»´í¬ë„ŒíŠ¸

```cpp
UCLASS(DisplayName="ì¹´ë©”ë¼", Description="ì”¬ ë Œë”ë§ ì¹´ë©”ë¼ ì»´í¬ë„ŒíŠ¸")
class UCameraComponent : public USceneComponent
{
public:
    GENERATED_REFLECTION_BODY()

    UPROPERTY(Category="[ì¹´ë©”ë¼]", EditAnywhere, Range="1.0, 179.0")
    float FOV = 90.0f;

    UPROPERTY(Category="[ì¹´ë©”ë¼]", EditAnywhere)
    float NearPlane = 0.1f;

    UPROPERTY(Category="[ì¹´ë©”ë¼]", EditAnywhere)
    float FarPlane = 10000.0f;

    UFUNCTION(DisplayName="FOVì„¤ì •", LuaBind)
    void SetFOV(float NewFOV);
};
```

#### íŒ¨í„´ 3: ë Œë”ë§ ì»´í¬ë„ŒíŠ¸

```cpp
UCLASS(DisplayName="ìŠ¤íƒœí‹± ë©”ì‹œ", Description="ì •ì  ë©”ì‹œ ë Œë”ë§ ì»´í¬ë„ŒíŠ¸")
class UStaticMeshComponent : public UPrimitiveComponent
{
public:
    GENERATED_REFLECTION_BODY()

    UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
    UStaticMesh* StaticMesh = nullptr;

    UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
    TArray<UMaterialInterface*> Materials;

    UPROPERTY(Category="[ë Œë”ë§]", EditAnywhere)
    bool bCastShadow = true;

    UFUNCTION(DisplayName="ë©”ì‹œì„¤ì •", LuaBind)
    void SetMesh(UStaticMesh* NewMesh);
};
```

---

### ë””ë²„ê¹… íŒ

#### 1. ìƒì„±ëœ ì½”ë“œ í™•ì¸

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ `Generated/` í´ë”ì˜ `.generated.cpp` íŒŒì¼ì„ í™•ì¸:

```bash
# Windows
notepad Generated\AMyCustomActor.generated.cpp

# ë˜ëŠ” ì—ë””í„°ë¡œ
code Generated\AMyCustomActor.generated.cpp
```

#### 2. íŒŒì‹± ë””ë²„ê·¸

íŒŒì„œê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ Python ìŠ¤í¬ë¦½íŠ¸ì— ë””ë²„ê·¸ ì¶œë ¥ ì¶”ê°€:

```python
# parser.pyì— ì¶”ê°€
print(f"Found UPROPERTY: {prop_name} ({prop_type})")
print(f"  Category: {prop.category}")
print(f"  Editable: {prop.editable}")
```

#### 3. ë¦¬í”Œë ‰ì…˜ ë™ì‘ í™•ì¸

ëŸ°íƒ€ì„ì—ì„œ ë¦¬í”Œë ‰ì…˜ì´ ì œëŒ€ë¡œ ë“±ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸:

```cpp
// C++ ì½”ë“œì—ì„œ
UClass* cls = AMyCustomActor::StaticClass();
UE_LOG(LogTemp, Log, "Class name: %s", cls->GetName());
UE_LOG(LogTemp, Log, "Property count: %d", cls->GetProperties().size());

for (auto& prop : cls->GetProperties())
{
    UE_LOG(LogTemp, Log, "Property: %s", prop->GetName());
}
```

---

## ìš”ì•½

ì´ ìë™í™” ì‹œìŠ¤í…œì€:

1. **C++ í—¤ë” íŒŒì¼**ì—ì„œ `UCLASS`, `UPROPERTY`, `UFUNCTION` ë§¤í¬ë¡œë¥¼ íŒŒì‹±
2. **Python ë„êµ¬**ë¡œ ë¦¬í”Œë ‰ì…˜ ë° Lua ë°”ì¸ë”© ì½”ë“œ ìë™ ìƒì„±
3. **`.generated.h`** ë° **`.generated.cpp`** íŒŒì¼ ì¶œë ¥
4. **ì—ë””í„°ì—ì„œ í”„ë¡œí¼í‹° í¸ì§‘** ë° **Luaì—ì„œ C++ í•¨ìˆ˜ í˜¸ì¶œ** ê°€ëŠ¥

**ì¥ì **:
- ìˆ˜ì‘ì—… ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ ì œê±°
- ì¼ê´€ëœ ì½”ë“œ ìŠ¤íƒ€ì¼ ìœ ì§€
- ìƒˆë¡œìš´ í´ë˜ìŠ¤ ì¶”ê°€ ì‹œê°„ ë‹¨ì¶• (ìˆ˜ì‹­ ë¶„ â†’ ìˆ˜ ë¶„)
- íœ´ë¨¼ ì—ëŸ¬ ê°ì†Œ

**í•µì‹¬ ì›ë¦¬**:
> "C++ ì»´íŒŒì¼ëŸ¬ëŠ” ë§¤í¬ë¡œë¥¼ ëª¨ë¥´ì§€ë§Œ, Python íŒŒì„œê°€ ë¯¸ë¦¬ ì½ì–´ì„œ í•„ìš”í•œ ì½”ë“œë¥¼ ìƒì„±í•œë‹¤"

**ì‹¤ì œ ì‚¬ìš© íë¦„**:
1. í—¤ë” íŒŒì¼ ì‘ì„± (ë§¤í¬ë¡œ í¬í•¨)
2. Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
3. `.generated.cpp` íŒŒì¼ ìë™ ìƒì„±
4. í”„ë¡œì íŠ¸ ë¹Œë“œ
5. Lua/ì—ë””í„°ì—ì„œ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥

ì´ë¡œì¨ ì–¸ë¦¬ì–¼ ì—”ì§„ê³¼ ìœ ì‚¬í•œ í¸ë¦¬í•œ ê°œë°œ ê²½í—˜ì„ ìì²´ ì—”ì§„ì—ì„œë„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
